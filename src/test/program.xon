#:#!/usr/bin/env /usr/local/bin/node
#:// <bitbar.title>Hubstaff Info</bitbar.title>
#:// <bitbar.version>v1.0.0</bitbar.version>
#:// <bitbar.author>Nizami</bitbar.author>
#:// <bitbar.author.github>nizami-dev</bitbar.author.github>
#:// <bitbar.desc>Show Hubstaff info</bitbar.desc>
#:// <bitbar.dependencies>node.js</bitbar.dependencies>
#:// <bitbar.image>https://i.imgur.com/0aNslKx.png</bitbar.image>
#:/*jshint esversion: 6 */

si = require('systeminformation')

renderPlugin()

render_plugin:
    //#:const battery = await si.battery();
    battery = si.batter()
    chargeIcon = battery.ischarging && 'âš¡' || ''
    color = getChargeColor(battery.percent)
    console.log(f'{color}{chargeIcon}{battery.percent}% | size=13')
    console.log('---')
    console.log('Refresh|refresh=true')

get_charge_color p:num:
  if p > 40: return '\u001b[32m' //green
  if p > 20: return '\u001b[33m' //yellow
  if p > 0: return '\u001b[31m' //red